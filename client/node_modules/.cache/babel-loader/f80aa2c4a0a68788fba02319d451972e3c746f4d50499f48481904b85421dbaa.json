{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lp107\\\\OneDrive\\\\Desktop\\\\Project\\\\client\\\\src\\\\pages\\\\TakeExam.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, Container, Paper, Typography, Button, Radio, RadioGroup, FormControlLabel, FormControl, Dialog, DialogTitle, DialogContent, DialogActions, Alert, LinearProgress, Card, CardContent, Chip, IconButton } from '@mui/material';\nimport { Warning, Visibility, VisibilityOff, Lock, Security, Timer, ExitToApp } from '@mui/icons-material';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TakeExam = () => {\n  _s();\n  var _answers$currentQ$id;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  // Exam state\n  const [exam, setExam] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [loading, setLoading] = useState(true);\n\n  // Security state\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [violations, setViolations] = useState([]);\n  const [warningCount, setWarningCount] = useState(0);\n  const [examStarted, setExamStarted] = useState(false);\n  const [examSubmitted, setExamSubmitted] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [tabSwitchCount, setTabSwitchCount] = useState(0);\n  const [proctoring, setProctoring] = useState({\n    cameraAccess: false,\n    screenRecording: false,\n    audioMonitoring: false\n  });\n\n  // Warning dialogs\n  const [showWarning, setShowWarning] = useState(false);\n  const [warningMessage, setWarningMessage] = useState('');\n  const [showTermination, setShowTermination] = useState(false);\n\n  // Refs\n  const examRef = useRef(null);\n  const videoRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const warningTimeoutRef = useRef(null);\n\n  // Security monitoring effects\n  useEffect(() => {\n    if (!examStarted) return;\n\n    // Prevent right-click context menu\n    const handleContextMenu = e => {\n      e.preventDefault();\n      addViolation('Attempted to access context menu');\n    };\n\n    // Prevent key combinations\n    const handleKeyDown = e => {\n      // Prevent F12, Ctrl+Shift+I, Ctrl+U, etc.\n      if (e.key === 'F12' || e.ctrlKey && e.shiftKey && e.key === 'I' || e.ctrlKey && e.shiftKey && e.key === 'C' || e.ctrlKey && e.key === 'u' || e.ctrlKey && e.key === 'U' || e.ctrlKey && e.key === 's' || e.ctrlKey && e.key === 'S' || e.key === 'PrintScreen') {\n        e.preventDefault();\n        addViolation(`Attempted to use prohibited key combination: ${e.key}`);\n      }\n    };\n\n    // Monitor tab visibility changes\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        setTabSwitchCount(prev => prev + 1);\n        addViolation('Tab switched or window minimized');\n        showWarningDialog('You switched tabs or minimized the window. This is not allowed during the exam.');\n      }\n    };\n\n    // Monitor mouse leave (potential tab switch)\n    const handleMouseLeave = () => {\n      addViolation('Mouse left the exam window');\n    };\n\n    // Prevent text selection\n    const handleSelectStart = e => {\n      e.preventDefault();\n    };\n\n    // Add event listeners\n    document.addEventListener('contextmenu', handleContextMenu);\n    document.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    document.addEventListener('mouseleave', handleMouseLeave);\n    document.addEventListener('selectstart', handleSelectStart);\n\n    // Disable copy/paste\n    document.addEventListener('copy', e => {\n      e.preventDefault();\n      addViolation('Attempted to copy content');\n    });\n    document.addEventListener('paste', e => {\n      e.preventDefault();\n      addViolation('Attempted to paste content');\n    });\n    return () => {\n      document.removeEventListener('contextmenu', handleContextMenu);\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      document.removeEventListener('mouseleave', handleMouseLeave);\n      document.removeEventListener('selectstart', handleSelectStart);\n    };\n  }, [examStarted]);\n\n  // Fullscreen monitoring\n  useEffect(() => {\n    if (!examStarted) return;\n    const handleFullscreenChange = () => {\n      const isCurrentlyFullscreen = !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);\n      setIsFullscreen(isCurrentlyFullscreen);\n      if (!isCurrentlyFullscreen && examStarted && !examSubmitted) {\n        addViolation('Exited fullscreen mode');\n        showWarningDialog('You must remain in fullscreen mode during the exam.');\n      }\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('mozfullscreenchange', handleFullscreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n    document.addEventListener('MSFullscreenChange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener('mozfullscreenchange', handleFullscreenChange);\n      document.removeEventListener('webkitfullscreenchange', handleFullscreenChange);\n      document.removeEventListener('MSFullscreenChange', handleFullscreenChange);\n    };\n  }, [examStarted, examSubmitted]);\n\n  // Timer countdown\n  useEffect(() => {\n    if (!examStarted || examSubmitted || timeLeft <= 0) return;\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 1) {\n          handleAutoSubmit();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [examStarted, examSubmitted, timeLeft]);\n\n  // Load exam data\n  useEffect(() => {\n    loadExam();\n  }, [id]);\n  const loadExam = async () => {\n    try {\n      setLoading(true);\n      // Mock exam data - replace with actual API call\n      const mockExam = {\n        id: id,\n        title: \"JavaScript Fundamentals Test\",\n        description: \"Test your knowledge of JavaScript basics\",\n        timeLimit: 30,\n        // minutes\n        totalMarks: 50,\n        passingMarks: 25,\n        instructions: \"Answer all questions. You cannot go back once you move to the next question.\",\n        settings: {\n          shuffleQuestions: true,\n          shuffleOptions: true,\n          showResults: false,\n          allowRetake: false,\n          proctoring: true,\n          lockdown: true,\n          preventCopyPaste: true,\n          showCorrectAnswers: false,\n          randomQuestions: false\n        },\n        questions: [{\n          id: 1,\n          question: \"What is the correct way to declare a variable in JavaScript?\",\n          type: \"multiple-choice\",\n          options: [\"var myVar = 5;\", \"variable myVar = 5;\", \"v myVar = 5;\", \"declare myVar = 5;\"],\n          correctAnswer: 0,\n          marks: 5\n        }, {\n          id: 2,\n          question: \"Which of the following is NOT a JavaScript data type?\",\n          type: \"multiple-choice\",\n          options: [\"String\", \"Boolean\", \"Float\", \"Object\"],\n          correctAnswer: 2,\n          marks: 5\n        }, {\n          id: 3,\n          question: \"What does '===' operator do in JavaScript?\",\n          type: \"multiple-choice\",\n          options: [\"Assigns a value\", \"Compares values only\", \"Compares values and types\", \"Creates a new variable\"],\n          correctAnswer: 2,\n          marks: 5\n        }]\n      };\n      setExam(mockExam);\n      setTimeLeft(mockExam.timeLimit * 60); // Convert to seconds\n    } catch (error) {\n      console.error('Failed to load exam:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const addViolation = violation => {\n    const timestamp = new Date().toLocaleTimeString();\n    const newViolation = {\n      id: Date.now(),\n      message: violation,\n      timestamp,\n      questionNumber: currentQuestion + 1\n    };\n    setViolations(prev => [...prev, newViolation]);\n    setWarningCount(prev => prev + 1);\n\n    // Auto-terminate after 3 violations\n    if (warningCount >= 2) {\n      setShowTermination(true);\n    }\n  };\n  const showWarningDialog = message => {\n    setWarningMessage(message);\n    setShowWarning(true);\n\n    // Auto-hide warning after 5 seconds\n    if (warningTimeoutRef.current) {\n      clearTimeout(warningTimeoutRef.current);\n    }\n    warningTimeoutRef.current = setTimeout(() => {\n      setShowWarning(false);\n    }, 5000);\n  };\n  const enterFullscreen = async () => {\n    try {\n      if (examRef.current) {\n        if (examRef.current.requestFullscreen) {\n          await examRef.current.requestFullscreen();\n        } else if (examRef.current.mozRequestFullScreen) {\n          await examRef.current.mozRequestFullScreen();\n        } else if (examRef.current.webkitRequestFullscreen) {\n          await examRef.current.webkitRequestFullscreen();\n        } else if (examRef.current.msRequestFullscreen) {\n          await examRef.current.msRequestFullscreen();\n        }\n      }\n    } catch (error) {\n      console.error('Failed to enter fullscreen:', error);\n    }\n  };\n  const startProctoring = async () => {\n    var _exam$settings;\n    if (!(exam !== null && exam !== void 0 && (_exam$settings = exam.settings) !== null && _exam$settings !== void 0 && _exam$settings.proctoring)) return;\n    try {\n      // Request camera access\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n\n      // Start recording (for proctoring)\n      if (MediaRecorder.isTypeSupported('video/webm')) {\n        mediaRecorderRef.current = new MediaRecorder(stream);\n        mediaRecorderRef.current.start();\n      }\n      setProctoring({\n        cameraAccess: true,\n        screenRecording: true,\n        audioMonitoring: true\n      });\n    } catch (error) {\n      console.error('Failed to start proctoring:', error);\n      showWarningDialog('Camera access is required for this proctored exam.');\n    }\n  };\n  const startExam = async () => {\n    var _exam$settings2;\n    // Enter fullscreen\n    await enterFullscreen();\n\n    // Start proctoring if enabled\n    if (exam !== null && exam !== void 0 && (_exam$settings2 = exam.settings) !== null && _exam$settings2 !== void 0 && _exam$settings2.proctoring) {\n      await startProctoring();\n    }\n    setExamStarted(true);\n    addViolation('Exam started');\n  };\n  const handleAnswerChange = (questionId, answerIndex) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answerIndex\n    }));\n  };\n  const handleNextQuestion = () => {\n    if (currentQuestion < exam.questions.length - 1) {\n      setCurrentQuestion(prev => prev + 1);\n    }\n  };\n  const handlePreviousQuestion = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion(prev => prev - 1);\n    }\n  };\n  const handleAutoSubmit = () => {\n    addViolation('Exam auto-submitted due to time expiry');\n    submitExam();\n  };\n  const submitExam = async () => {\n    try {\n      setExamSubmitted(true);\n\n      // Calculate score\n      let score = 0;\n      exam.questions.forEach(question => {\n        if (answers[question.id] === question.correctAnswer) {\n          score += question.marks;\n        }\n      });\n\n      // Stop proctoring\n      if (mediaRecorderRef.current) {\n        mediaRecorderRef.current.stop();\n      }\n\n      // Exit fullscreen\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      }\n\n      // Submit exam data (replace with actual API call)\n      const examResult = {\n        examId: exam.id,\n        answers,\n        score,\n        totalMarks: exam.totalMarks,\n        violations,\n        timeSpent: exam.timeLimit * 60 - timeLeft,\n        tabSwitchCount,\n        warningCount\n      };\n      console.log('Exam submitted:', examResult);\n\n      // Navigate to results page\n      navigate(`/exam-result/${exam.id}`, {\n        state: {\n          result: examResult,\n          passed: score >= exam.passingMarks\n        }\n      });\n    } catch (error) {\n      console.error('Failed to submit exam:', error);\n    }\n  };\n  const terminateExam = () => {\n    addViolation('Exam terminated due to multiple violations');\n    submitExam();\n  };\n  const formatTime = seconds => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          minHeight: '60vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n          sx: {\n            width: '300px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this);\n  }\n  if (!exam) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: \"Exam not found or access denied.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Pre-exam instructions\n  if (!examStarted) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      sx: {\n        py: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: exam.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: exam.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"Exam Instructions:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            paragraph: true,\n            children: exam.instructions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              label: `Time Limit: ${exam.timeLimit} minutes`,\n              color: \"primary\",\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: `Total Questions: ${exam.questions.length}`,\n              color: \"secondary\",\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: `Total Marks: ${exam.totalMarks}`,\n              color: \"success\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"warning\",\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            gutterBottom: true,\n            children: [/*#__PURE__*/_jsxDEV(Security, {\n              sx: {\n                mr: 1,\n                verticalAlign: 'middle'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this), \"Exam Security Rules:\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              margin: 0,\n              paddingLeft: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"You must remain in fullscreen mode during the exam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Tab switching or window minimization is prohibited\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Right-click and keyboard shortcuts are disabled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Copy/paste operations are blocked\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Your screen activity will be monitored\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Camera access is required for proctoring\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Multiple violations will result in exam termination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 11\n        }, this), exam.settings.proctoring && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          sx: {\n            mb: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            children: \"This is a proctored exam. Your camera and microphone will be accessed to ensure exam integrity.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            textAlign: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            size: \"large\",\n            onClick: startExam,\n            startIcon: /*#__PURE__*/_jsxDEV(Lock, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 26\n            }, this),\n            sx: {\n              minWidth: 200\n            },\n            children: \"Start Secure Exam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Exam interface\n  const currentQ = exam.questions[currentQuestion];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: examRef,\n    style: {\n      minHeight: '100vh',\n      backgroundColor: '#f5f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 2,\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: exam.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              icon: /*#__PURE__*/_jsxDEV(Timer, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 23\n              }, this),\n              label: formatTime(timeLeft),\n              color: timeLeft < 300 ? 'error' : 'primary',\n              variant: \"outlined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              icon: /*#__PURE__*/_jsxDEV(Warning, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 23\n              }, this),\n              label: `Warnings: ${warningCount}`,\n              color: warningCount > 0 ? 'warning' : 'default',\n              variant: \"outlined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), exam.settings.proctoring && /*#__PURE__*/_jsxDEV(Chip, {\n              icon: /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 25\n              }, this),\n              label: \"Monitored\",\n              color: \"secondary\",\n              variant: \"outlined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mb: 1\n            },\n            children: [\"Question \", currentQuestion + 1, \" of \", exam.questions.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n            variant: \"determinate\",\n            value: (currentQuestion + 1) / exam.questions.length * 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: [\"Question \", currentQuestion + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: currentQ.question\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          component: \"fieldset\",\n          fullWidth: true,\n          children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n            value: (_answers$currentQ$id = answers[currentQ.id]) !== null && _answers$currentQ$id !== void 0 ? _answers$currentQ$id : '',\n            onChange: e => handleAnswerChange(currentQ.id, parseInt(e.target.value)),\n            children: currentQ.options.map((option, index) => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: index,\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 28\n              }, this),\n              label: option,\n              sx: {\n                mb: 1\n              }\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handlePreviousQuestion,\n            disabled: currentQuestion === 0,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 2\n            },\n            children: currentQuestion === exam.questions.length - 1 ? /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"success\",\n              onClick: submitExam,\n              startIcon: /*#__PURE__*/_jsxDEV(ExitToApp, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 30\n              }, this),\n              children: \"Submit Exam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: handleNextQuestion,\n              children: \"Next Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this), exam.settings.proctoring && /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showWarning,\n      onClose: () => setShowWarning(false),\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Warning, {\n          color: \"warning\",\n          sx: {\n            mr: 1,\n            verticalAlign: 'middle'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this), \"Exam Violation Warning\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          children: warningMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"warning\",\n          sx: {\n            mt: 2\n          },\n          children: \"Multiple violations will result in automatic exam termination.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowWarning(false),\n          variant: \"contained\",\n          children: \"I Understand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showTermination,\n      disableEscapeKeyDown: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Warning, {\n          color: \"error\",\n          sx: {\n            mr: 1,\n            verticalAlign: 'middle'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 11\n        }, this), \"Exam Terminated\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          children: \"Your exam has been terminated due to multiple security violations. Your responses have been recorded and will be reviewed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 691,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 2\n          },\n          children: \"Final Score: Based on answered questions only\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: terminateExam,\n          variant: \"contained\",\n          color: \"error\",\n          children: \"Exit Exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 546,\n    columnNumber: 5\n  }, this);\n};\n_s(TakeExam, \"CbU38JwWVinehJ1XT81ONQfbeF0=\", false, function () {\n  return [useParams, useNavigate, useDispatch];\n});\n_c = TakeExam;\nexport default TakeExam;\nvar _c;\n$RefreshReg$(_c, \"TakeExam\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Box","Container","Paper","Typography","Button","Radio","RadioGroup","FormControlLabel","FormControl","Dialog","DialogTitle","DialogContent","DialogActions","Alert","LinearProgress","Card","CardContent","Chip","IconButton","Warning","Visibility","VisibilityOff","Lock","Security","Timer","ExitToApp","useParams","useNavigate","useDispatch","jsxDEV","_jsxDEV","TakeExam","_s","_answers$currentQ$id","id","navigate","dispatch","exam","setExam","currentQuestion","setCurrentQuestion","answers","setAnswers","loading","setLoading","isFullscreen","setIsFullscreen","violations","setViolations","warningCount","setWarningCount","examStarted","setExamStarted","examSubmitted","setExamSubmitted","timeLeft","setTimeLeft","tabSwitchCount","setTabSwitchCount","proctoring","setProctoring","cameraAccess","screenRecording","audioMonitoring","showWarning","setShowWarning","warningMessage","setWarningMessage","showTermination","setShowTermination","examRef","videoRef","mediaRecorderRef","warningTimeoutRef","handleContextMenu","e","preventDefault","addViolation","handleKeyDown","key","ctrlKey","shiftKey","handleVisibilityChange","document","hidden","prev","showWarningDialog","handleMouseLeave","handleSelectStart","addEventListener","removeEventListener","handleFullscreenChange","isCurrentlyFullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","timer","setInterval","handleAutoSubmit","clearInterval","loadExam","mockExam","title","description","timeLimit","totalMarks","passingMarks","instructions","settings","shuffleQuestions","shuffleOptions","showResults","allowRetake","lockdown","preventCopyPaste","showCorrectAnswers","randomQuestions","questions","question","type","options","correctAnswer","marks","error","console","violation","timestamp","Date","toLocaleTimeString","newViolation","now","message","questionNumber","current","clearTimeout","setTimeout","enterFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","startProctoring","_exam$settings","stream","navigator","mediaDevices","getUserMedia","video","audio","srcObject","MediaRecorder","isTypeSupported","start","startExam","_exam$settings2","handleAnswerChange","questionId","answerIndex","handleNextQuestion","length","handlePreviousQuestion","submitExam","score","forEach","stop","exitFullscreen","examResult","examId","timeSpent","log","state","result","passed","terminateExam","formatTime","seconds","hours","Math","floor","minutes","secs","toString","padStart","maxWidth","sx","py","children","display","justifyContent","alignItems","minHeight","width","fileName","_jsxFileName","lineNumber","columnNumber","severity","p","variant","gutterBottom","paragraph","mb","label","color","mr","verticalAlign","style","margin","paddingLeft","textAlign","size","onClick","startIcon","minWidth","currentQ","ref","backgroundColor","gap","icon","mt","value","component","fullWidth","onChange","parseInt","target","map","option","index","control","disabled","autoPlay","muted","open","onClose","disableEscapeKeyDown","_c","$RefreshReg$"],"sources":["C:/Users/lp107/OneDrive/Desktop/Project/client/src/pages/TakeExam.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Radio,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  FormControl,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Alert,\r\n  LinearProgress,\r\n  Card,\r\n  CardContent,\r\n  Chip,\r\n  IconButton\r\n} from '@mui/material';\r\nimport {\r\n  Warning,\r\n  Visibility,\r\n  VisibilityOff,\r\n  Lock,\r\n  Security,\r\n  Timer,\r\n  ExitToApp\r\n} from '@mui/icons-material';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst TakeExam = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  \r\n  // Exam state\r\n  const [exam, setExam] = useState(null);\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Security state\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [violations, setViolations] = useState([]);\r\n  const [warningCount, setWarningCount] = useState(0);\r\n  const [examStarted, setExamStarted] = useState(false);\r\n  const [examSubmitted, setExamSubmitted] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [tabSwitchCount, setTabSwitchCount] = useState(0);\r\n  const [proctoring, setProctoring] = useState({\r\n    cameraAccess: false,\r\n    screenRecording: false,\r\n    audioMonitoring: false\r\n  });\r\n  \r\n  // Warning dialogs\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const [warningMessage, setWarningMessage] = useState('');\r\n  const [showTermination, setShowTermination] = useState(false);\r\n  \r\n  // Refs\r\n  const examRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const warningTimeoutRef = useRef(null);\r\n\r\n  // Security monitoring effects\r\n  useEffect(() => {\r\n    if (!examStarted) return;\r\n\r\n    // Prevent right-click context menu\r\n    const handleContextMenu = (e) => {\r\n      e.preventDefault();\r\n      addViolation('Attempted to access context menu');\r\n    };\r\n\r\n    // Prevent key combinations\r\n    const handleKeyDown = (e) => {\r\n      // Prevent F12, Ctrl+Shift+I, Ctrl+U, etc.\r\n      if (\r\n        e.key === 'F12' ||\r\n        (e.ctrlKey && e.shiftKey && e.key === 'I') ||\r\n        (e.ctrlKey && e.shiftKey && e.key === 'C') ||\r\n        (e.ctrlKey && e.key === 'u') ||\r\n        (e.ctrlKey && e.key === 'U') ||\r\n        (e.ctrlKey && e.key === 's') ||\r\n        (e.ctrlKey && e.key === 'S') ||\r\n        e.key === 'PrintScreen'\r\n      ) {\r\n        e.preventDefault();\r\n        addViolation(`Attempted to use prohibited key combination: ${e.key}`);\r\n      }\r\n    };\r\n\r\n    // Monitor tab visibility changes\r\n    const handleVisibilityChange = () => {\r\n      if (document.hidden) {\r\n        setTabSwitchCount(prev => prev + 1);\r\n        addViolation('Tab switched or window minimized');\r\n        showWarningDialog('You switched tabs or minimized the window. This is not allowed during the exam.');\r\n      }\r\n    };\r\n\r\n    // Monitor mouse leave (potential tab switch)\r\n    const handleMouseLeave = () => {\r\n      addViolation('Mouse left the exam window');\r\n    };\r\n\r\n    // Prevent text selection\r\n    const handleSelectStart = (e) => {\r\n      e.preventDefault();\r\n    };\r\n\r\n    // Add event listeners\r\n    document.addEventListener('contextmenu', handleContextMenu);\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    document.addEventListener('mouseleave', handleMouseLeave);\r\n    document.addEventListener('selectstart', handleSelectStart);\r\n\r\n    // Disable copy/paste\r\n    document.addEventListener('copy', (e) => {\r\n      e.preventDefault();\r\n      addViolation('Attempted to copy content');\r\n    });\r\n    \r\n    document.addEventListener('paste', (e) => {\r\n      e.preventDefault();\r\n      addViolation('Attempted to paste content');\r\n    });\r\n\r\n    return () => {\r\n      document.removeEventListener('contextmenu', handleContextMenu);\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      document.removeEventListener('mouseleave', handleMouseLeave);\r\n      document.removeEventListener('selectstart', handleSelectStart);\r\n    };\r\n  }, [examStarted]);\r\n\r\n  // Fullscreen monitoring\r\n  useEffect(() => {\r\n    if (!examStarted) return;\r\n\r\n    const handleFullscreenChange = () => {\r\n      const isCurrentlyFullscreen = !!(\r\n        document.fullscreenElement ||\r\n        document.mozFullScreenElement ||\r\n        document.webkitFullscreenElement ||\r\n        document.msFullscreenElement\r\n      );\r\n\r\n      setIsFullscreen(isCurrentlyFullscreen);\r\n\r\n      if (!isCurrentlyFullscreen && examStarted && !examSubmitted) {\r\n        addViolation('Exited fullscreen mode');\r\n        showWarningDialog('You must remain in fullscreen mode during the exam.');\r\n      }\r\n    };\r\n\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    document.addEventListener('mozfullscreenchange', handleFullscreenChange);\r\n    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\r\n    document.addEventListener('MSFullscreenChange', handleFullscreenChange);\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n      document.removeEventListener('mozfullscreenchange', handleFullscreenChange);\r\n      document.removeEventListener('webkitfullscreenchange', handleFullscreenChange);\r\n      document.removeEventListener('MSFullscreenChange', handleFullscreenChange);\r\n    };\r\n  }, [examStarted, examSubmitted]);\r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    if (!examStarted || examSubmitted || timeLeft <= 0) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeLeft(prev => {\r\n        if (prev <= 1) {\r\n          handleAutoSubmit();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [examStarted, examSubmitted, timeLeft]);\r\n\r\n  // Load exam data\r\n  useEffect(() => {\r\n    loadExam();\r\n  }, [id]);\r\n\r\n  const loadExam = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Mock exam data - replace with actual API call\r\n      const mockExam = {\r\n        id: id,\r\n        title: \"JavaScript Fundamentals Test\",\r\n        description: \"Test your knowledge of JavaScript basics\",\r\n        timeLimit: 30, // minutes\r\n        totalMarks: 50,\r\n        passingMarks: 25,\r\n        instructions: \"Answer all questions. You cannot go back once you move to the next question.\",\r\n        settings: {\r\n          shuffleQuestions: true,\r\n          shuffleOptions: true,\r\n          showResults: false,\r\n          allowRetake: false,\r\n          proctoring: true,\r\n          lockdown: true,\r\n          preventCopyPaste: true,\r\n          showCorrectAnswers: false,\r\n          randomQuestions: false\r\n        },\r\n        questions: [\r\n          {\r\n            id: 1,\r\n            question: \"What is the correct way to declare a variable in JavaScript?\",\r\n            type: \"multiple-choice\",\r\n            options: [\r\n              \"var myVar = 5;\",\r\n              \"variable myVar = 5;\",\r\n              \"v myVar = 5;\",\r\n              \"declare myVar = 5;\"\r\n            ],\r\n            correctAnswer: 0,\r\n            marks: 5\r\n          },\r\n          {\r\n            id: 2,\r\n            question: \"Which of the following is NOT a JavaScript data type?\",\r\n            type: \"multiple-choice\",\r\n            options: [\r\n              \"String\",\r\n              \"Boolean\",\r\n              \"Float\",\r\n              \"Object\"\r\n            ],\r\n            correctAnswer: 2,\r\n            marks: 5\r\n          },\r\n          {\r\n            id: 3,\r\n            question: \"What does '===' operator do in JavaScript?\",\r\n            type: \"multiple-choice\",\r\n            options: [\r\n              \"Assigns a value\",\r\n              \"Compares values only\",\r\n              \"Compares values and types\",\r\n              \"Creates a new variable\"\r\n            ],\r\n            correctAnswer: 2,\r\n            marks: 5\r\n          }\r\n        ]\r\n      };\r\n      \r\n      setExam(mockExam);\r\n      setTimeLeft(mockExam.timeLimit * 60); // Convert to seconds\r\n    } catch (error) {\r\n      console.error('Failed to load exam:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addViolation = (violation) => {\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    const newViolation = {\r\n      id: Date.now(),\r\n      message: violation,\r\n      timestamp,\r\n      questionNumber: currentQuestion + 1\r\n    };\r\n    \r\n    setViolations(prev => [...prev, newViolation]);\r\n    setWarningCount(prev => prev + 1);\r\n\r\n    // Auto-terminate after 3 violations\r\n    if (warningCount >= 2) {\r\n      setShowTermination(true);\r\n    }\r\n  };\r\n\r\n  const showWarningDialog = (message) => {\r\n    setWarningMessage(message);\r\n    setShowWarning(true);\r\n    \r\n    // Auto-hide warning after 5 seconds\r\n    if (warningTimeoutRef.current) {\r\n      clearTimeout(warningTimeoutRef.current);\r\n    }\r\n    warningTimeoutRef.current = setTimeout(() => {\r\n      setShowWarning(false);\r\n    }, 5000);\r\n  };\r\n\r\n  const enterFullscreen = async () => {\r\n    try {\r\n      if (examRef.current) {\r\n        if (examRef.current.requestFullscreen) {\r\n          await examRef.current.requestFullscreen();\r\n        } else if (examRef.current.mozRequestFullScreen) {\r\n          await examRef.current.mozRequestFullScreen();\r\n        } else if (examRef.current.webkitRequestFullscreen) {\r\n          await examRef.current.webkitRequestFullscreen();\r\n        } else if (examRef.current.msRequestFullscreen) {\r\n          await examRef.current.msRequestFullscreen();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to enter fullscreen:', error);\r\n    }\r\n  };\r\n\r\n  const startProctoring = async () => {\r\n    if (!exam?.settings?.proctoring) return;\r\n\r\n    try {\r\n      // Request camera access\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n        audio: true\r\n      });\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n      }\r\n\r\n      // Start recording (for proctoring)\r\n      if (MediaRecorder.isTypeSupported('video/webm')) {\r\n        mediaRecorderRef.current = new MediaRecorder(stream);\r\n        mediaRecorderRef.current.start();\r\n      }\r\n\r\n      setProctoring({\r\n        cameraAccess: true,\r\n        screenRecording: true,\r\n        audioMonitoring: true\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to start proctoring:', error);\r\n      showWarningDialog('Camera access is required for this proctored exam.');\r\n    }\r\n  };\r\n\r\n  const startExam = async () => {\r\n    // Enter fullscreen\r\n    await enterFullscreen();\r\n    \r\n    // Start proctoring if enabled\r\n    if (exam?.settings?.proctoring) {\r\n      await startProctoring();\r\n    }\r\n    \r\n    setExamStarted(true);\r\n    addViolation('Exam started');\r\n  };\r\n\r\n  const handleAnswerChange = (questionId, answerIndex) => {\r\n    setAnswers(prev => ({\r\n      ...prev,\r\n      [questionId]: answerIndex\r\n    }));\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (currentQuestion < exam.questions.length - 1) {\r\n      setCurrentQuestion(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousQuestion = () => {\r\n    if (currentQuestion > 0) {\r\n      setCurrentQuestion(prev => prev - 1);\r\n    }\r\n  };\r\n\r\n  const handleAutoSubmit = () => {\r\n    addViolation('Exam auto-submitted due to time expiry');\r\n    submitExam();\r\n  };\r\n\r\n  const submitExam = async () => {\r\n    try {\r\n      setExamSubmitted(true);\r\n      \r\n      // Calculate score\r\n      let score = 0;\r\n      exam.questions.forEach(question => {\r\n        if (answers[question.id] === question.correctAnswer) {\r\n          score += question.marks;\r\n        }\r\n      });\r\n\r\n      // Stop proctoring\r\n      if (mediaRecorderRef.current) {\r\n        mediaRecorderRef.current.stop();\r\n      }\r\n\r\n      // Exit fullscreen\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n      }\r\n\r\n      // Submit exam data (replace with actual API call)\r\n      const examResult = {\r\n        examId: exam.id,\r\n        answers,\r\n        score,\r\n        totalMarks: exam.totalMarks,\r\n        violations,\r\n        timeSpent: (exam.timeLimit * 60) - timeLeft,\r\n        tabSwitchCount,\r\n        warningCount\r\n      };\r\n\r\n      console.log('Exam submitted:', examResult);\r\n      \r\n      // Navigate to results page\r\n      navigate(`/exam-result/${exam.id}`, { \r\n        state: { \r\n          result: examResult,\r\n          passed: score >= exam.passingMarks \r\n        } \r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to submit exam:', error);\r\n    }\r\n  };\r\n\r\n  const terminateExam = () => {\r\n    addViolation('Exam terminated due to multiple violations');\r\n    submitExam();\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh' }}>\r\n          <LinearProgress sx={{ width: '300px' }} />\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!exam) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\r\n        <Alert severity=\"error\">Exam not found or access denied.</Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Pre-exam instructions\r\n  if (!examStarted) {\r\n    return (\r\n      <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n        <Paper sx={{ p: 4 }}>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            {exam.title}\r\n          </Typography>\r\n          \r\n          <Typography variant=\"body1\" paragraph>\r\n            {exam.description}\r\n          </Typography>\r\n\r\n          <Box sx={{ mb: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Exam Instructions:\r\n            </Typography>\r\n            <Typography variant=\"body2\" paragraph>\r\n              {exam.instructions}\r\n            </Typography>\r\n            \r\n            <Box sx={{ mb: 2 }}>\r\n              <Chip label={`Time Limit: ${exam.timeLimit} minutes`} color=\"primary\" sx={{ mr: 1 }} />\r\n              <Chip label={`Total Questions: ${exam.questions.length}`} color=\"secondary\" sx={{ mr: 1 }} />\r\n              <Chip label={`Total Marks: ${exam.totalMarks}`} color=\"success\" />\r\n            </Box>\r\n          </Box>\r\n\r\n          <Alert severity=\"warning\" sx={{ mb: 3 }}>\r\n            <Typography variant=\"subtitle2\" gutterBottom>\r\n              <Security sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              Exam Security Rules:\r\n            </Typography>\r\n            <ul style={{ margin: 0, paddingLeft: '20px' }}>\r\n              <li>You must remain in fullscreen mode during the exam</li>\r\n              <li>Tab switching or window minimization is prohibited</li>\r\n              <li>Right-click and keyboard shortcuts are disabled</li>\r\n              <li>Copy/paste operations are blocked</li>\r\n              <li>Your screen activity will be monitored</li>\r\n              <li>Camera access is required for proctoring</li>\r\n              <li>Multiple violations will result in exam termination</li>\r\n            </ul>\r\n          </Alert>\r\n\r\n          {exam.settings.proctoring && (\r\n            <Alert severity=\"info\" sx={{ mb: 3 }}>\r\n              <Typography variant=\"subtitle2\">\r\n                This is a proctored exam. Your camera and microphone will be accessed to ensure exam integrity.\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n\r\n          <Box sx={{ textAlign: 'center' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              onClick={startExam}\r\n              startIcon={<Lock />}\r\n              sx={{ minWidth: 200 }}\r\n            >\r\n              Start Secure Exam\r\n            </Button>\r\n          </Box>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Exam interface\r\n  const currentQ = exam.questions[currentQuestion];\r\n  \r\n  return (\r\n    <div ref={examRef} style={{ minHeight: '100vh', backgroundColor: '#f5f5f5' }}>\r\n      <Container maxWidth=\"lg\" sx={{ py: 2 }}>\r\n        {/* Exam Header */}\r\n        <Paper sx={{ p: 2, mb: 2 }}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <Typography variant=\"h6\">{exam.title}</Typography>\r\n            \r\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n              {/* Timer */}\r\n              <Chip\r\n                icon={<Timer />}\r\n                label={formatTime(timeLeft)}\r\n                color={timeLeft < 300 ? 'error' : 'primary'}\r\n                variant=\"outlined\"\r\n              />\r\n              \r\n              {/* Violation counter */}\r\n              <Chip\r\n                icon={<Warning />}\r\n                label={`Warnings: ${warningCount}`}\r\n                color={warningCount > 0 ? 'warning' : 'default'}\r\n                variant=\"outlined\"\r\n              />\r\n              \r\n              {/* Proctoring status */}\r\n              {exam.settings.proctoring && (\r\n                <Chip\r\n                  icon={<Visibility />}\r\n                  label=\"Monitored\"\r\n                  color=\"secondary\"\r\n                  variant=\"outlined\"\r\n                />\r\n              )}\r\n            </Box>\r\n          </Box>\r\n          \r\n          {/* Progress bar */}\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body2\" sx={{ mb: 1 }}>\r\n              Question {currentQuestion + 1} of {exam.questions.length}\r\n            </Typography>\r\n            <LinearProgress \r\n              variant=\"determinate\" \r\n              value={((currentQuestion + 1) / exam.questions.length) * 100} \r\n            />\r\n          </Box>\r\n        </Paper>\r\n\r\n        {/* Question */}\r\n        <Paper sx={{ p: 3, mb: 2 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Question {currentQuestion + 1}\r\n          </Typography>\r\n          \r\n          <Typography variant=\"body1\" paragraph>\r\n            {currentQ.question}\r\n          </Typography>\r\n\r\n          <FormControl component=\"fieldset\" fullWidth>\r\n            <RadioGroup\r\n              value={answers[currentQ.id] ?? ''}\r\n              onChange={(e) => handleAnswerChange(currentQ.id, parseInt(e.target.value))}\r\n            >\r\n              {currentQ.options.map((option, index) => (\r\n                <FormControlLabel\r\n                  key={index}\r\n                  value={index}\r\n                  control={<Radio />}\r\n                  label={option}\r\n                  sx={{ mb: 1 }}\r\n                />\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n        </Paper>\r\n\r\n        {/* Navigation */}\r\n        <Paper sx={{ p: 2 }}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <Button\r\n              onClick={handlePreviousQuestion}\r\n              disabled={currentQuestion === 0}\r\n            >\r\n              Previous\r\n            </Button>\r\n            \r\n            <Box sx={{ display: 'flex', gap: 2 }}>\r\n              {currentQuestion === exam.questions.length - 1 ? (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"success\"\r\n                  onClick={submitExam}\r\n                  startIcon={<ExitToApp />}\r\n                >\r\n                  Submit Exam\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  onClick={handleNextQuestion}\r\n                >\r\n                  Next Question\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n\r\n        {/* Proctoring video (hidden) */}\r\n        {exam.settings.proctoring && (\r\n          <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            muted\r\n            style={{ display: 'none' }}\r\n          />\r\n        )}\r\n      </Container>\r\n\r\n      {/* Warning Dialog */}\r\n      <Dialog open={showWarning} onClose={() => setShowWarning(false)}>\r\n        <DialogTitle>\r\n          <Warning color=\"warning\" sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n          Exam Violation Warning\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography>{warningMessage}</Typography>\r\n          <Alert severity=\"warning\" sx={{ mt: 2 }}>\r\n            Multiple violations will result in automatic exam termination.\r\n          </Alert>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setShowWarning(false)} variant=\"contained\">\r\n            I Understand\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Termination Dialog */}\r\n      <Dialog open={showTermination} disableEscapeKeyDown>\r\n        <DialogTitle>\r\n          <Warning color=\"error\" sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n          Exam Terminated\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Your exam has been terminated due to multiple security violations.\r\n            Your responses have been recorded and will be reviewed.\r\n          </Typography>\r\n          <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n            Final Score: Based on answered questions only\r\n          </Alert>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={terminateExam} variant=\"contained\" color=\"error\">\r\n            Exit Exam\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TakeExam;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}